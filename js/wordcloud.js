
const myWords=[
    {
        "word": "YUAN",
        'tcolor':'#36ff00',
        'rot': '1',
        'x':0.2,
        'y':0.16,
        'fill':'#ffffff',
        'border':3,
        'borderColor':'#000000',
        "font": "Press_Start_2P",
        "size": "89",
        "link2":"index_0.html#mapplot"

    },
    {
        "word": "MAP",
        'tcolor':'#000000',
        'rot': '3',
        'x':0.75,
        'y':0.4,
        'fill':'#ffffff',
        'border':'solid',
        'borderColor':'#cb5959',
        "font": "Geostar_Fill",
        "size": "10",
        "link":"<p>density of restaurants, builidng footprints, roads</p>",
        "link2":"index_0.html#mapplot"
    },
    {
        "word": "ORDER",
        'tcolor':'#000000',
        'rot': '0',
        'x':0.01,
        'y':0.23,
        'fill':'#ffffff',
        'border':2,
        'borderColor':'#36ff00',
        "font": "Press_Start_2P",
        "size": "30",
        "link":'<p>This project focuses on food delivery workers in China whose presence makes possible the elision of geopolitical distance that is crystallized to power by the digital undercurrent of the urban environment and the flow of capital. </p>',
        "link2":"index_0.html#order"

    },
    {
        "word": "FORMS of assembLY",
        'tcolor':'#000000',
        'rot': '0',
        'x':0.01,
        'y':0.93,
        'fill':'#ffffff',
        'border':'solid',
        'borderColor':'#cb5959',
        "font": "Press_Start_2P",
        "size": "10",
        "link2":"index_0.html#opening"

    },
    {
        "word": "ORGANIC",
        'tcolor':'#000000',
        'rot': '0',
        'x':0.01,
        'y':0.9,
        'fill':'#ffffff',
        'border':1,
        'borderColor':'#36ff00',
        "font": "Rubik_80s_Fade",
        "size": "200",
        "link":"<p>The project looks at the assembly of gig economy workers and their patches of livelihood that pale into indifference under the gig economy, through their precarious working condition, the affective labor, and the Orwellian labor coordination of algorithms.\n" +
            "The project is composed of counter-narratives of the management literature boosting gig economy, roiling waves of the modernization promises that spouses and reifies the dominion of existing power structure.\n" +
            "The objective is to increase the saliency of the “casualization of the workforce, informalization of the formal economy, and the so called ‘demutualization of risk’”[Valerio De Stefano] concurrent with the gig economy.</p>",
        "link2":"index_0.html#opening"

    },
    {
        "word": "LAY claims",
        'tcolor':'#000000',
        'rot': '0',
        'x':0.2,
        'y':0.6,
        'fill':'#ffffff',
        'border':3,
        'borderColor':'#36ff00',
        "font": "Rampart_One",
        "size": "100",
        "link":"<p>policy suggetsions</p>",
        "link2":"index_0.html#policy"

    },
    {
        "word": "laBOR",
        'tcolor':'#36ff00',
        'rot': '0',
        'x':0.5,
        'y':0.58,
        'fill':'#ffffff',
        'border':5,
        'borderColor':'#000000',
        "font": "Press_Start_2P",
        "size": "150",
        "link2":"index_0.html#story"

    },
    {
        "word": "TIME",
        'tcolor':'#36ff00',
        'rot': '0',
        'x':0.29,
        'y':0.2,
        'fill':'#ffffff',
        'border':6,
        'borderColor':'#000000',
        "font": "Rampart_One",
        "size": "150",
        "link": '<img class="roundgif" src="img/waimai.gif" width="150">',
        "link2":"index_0.html#story"

    },
    {
        "word": "外卖",
        'tcolor':'#000000',
        'rot': '1',
        'x':0.51,
        'y':0.1,
        'fill':'#ffffff',
        'border':2,
        'borderColor':'#36ff00',
        "font": "ZCOOL_XiaoWei",
        "size": "200",
        "link": '<img class="roundgif" src="img/waim.gif" width="100" height="100" >',
        "link2":"index_0.html#mapplot"
    },
    {
        "word": "UNHAPPY",
        'tcolor':'#36ff00',
        'rot': '1',
        'x':0.1,
        'y':0.1,
        'fill':'#ffffff',
        'border':0,
        'borderColor':'#000000',
        "font": "Libre_Barcode_39",
        "size": "200",
        "link": '<img class="roundgif" src="img/xiaoge.gif" width="120" height="120" >',
        "link2":"index_0.html#story"
    },
    {
        "word": "CARING",
        'tcolor':'#36ff00',
        'rot': '0',
        'x':0.57,
        'y':0.9,
        'fill':'#ffffff',
        'border':0.5,
        'borderColor':'#000000',
        "font": "Fredericka_the_Great",
        "size": "50",
        "link":'The gig economy, at the convergence of labor, technology, and the market, is about “metabolic rift,” systemic inequity, affective labor, dataveillance, informalization, hyper-subjectivity…\n' +
            '\n' +
            'In response to the prolonged working hours, the project is speaking to workers’ \n' +
            '\tphysical needs: to sleep/rest\n' +
            '\tand social need: to assemble \n' +
            '\n' +
            'The title Organic Caring comes from what Marx points out that human bodies, too, require organic care.\n',
        "link2":"index_0.html#mapplot"

    },
    {
        "word": "ZGC",
        'tcolor':'#36ff00',
        'rot': '0',
        'x':0.35,
        'y':0.7,
        'fill':'#ffffff',
        'border':0,
        'borderColor':'#000000',
        "font": "Monoton",
        "size": "90",
        "link":'<p>The site Zhonguancun is in Haidian, Beijing, China.</p>',
        "link2":"index_0.html#mapplot"
    },
    {
        "word": "TIREEED",
        'tcolor':'#000000',
        'rot': '1',
        'x':0.01,
        'y':0.27,
        'fill':'#ffffff',
        'border':1,
        'borderColor':'#36ff00',
        "font": "Hnalei",
        "size": "130",
        "link": '<img class="roundgif" src="img/waimai.gif" width="100" height="100" >',
        "link2":"index_0.html#story"
    },
]
const literature=[
    {
        "title": "Bodies in Alliance and the Politics of the Street",
        "author":'J. Butler',
        "link":'<p>click to visit</p>',
        "link2":'https://transversal.at/transversal/1011/butler/en'
    },{
        "title": "The Human Condition",
        "author":'H. Arendt',
        "link":'<p>click to visit</p>',

        "link2":'https://monoskop.org/images/e/e2/Arendt_Hannah_The_Human_Condition_2nd_1998.pdf'
    },{
        "title": "Mushroom at the end of the World",
        "author":'A. Tsing',
        "link":'<p>click to visit</p>',

        "link2":'https://www.amazon.com/s?k=mushroom+at+the+end+of+the+world&hvadid=241924978495&hvdev=c&hvlocphy=1018092&hvnetw=g&hvqmt=e&hvrand=3618800577148364606&hvtargid=kwd-157326925024&hydadcr=22593_10348166&tag=googhydr-20&ref=pd_sl_17bv33xol4_e'
    },{
        "title": "Capital",
        "author":'C. Marx',
        "link":'<p>click to visit</p>',

        "link2":'https://www.marxists.org/archive/marx/works/download/pdf/Capital-Volume-I.pdf'
    },{
        "title": "American Lucifers",
        "author":'J. Zallen',
        "link":'<p>click to visit</p>',

        "link2":'https://uncpress.org/book/9781469653327/american-lucifers/'
    },{
        "title": "Labor and Monopoly Capital",
        "author":'H. Braverman',
        "link":'<p>click to visit</p>',

        "link2":'https://www.jstor.org/stable/j.ctt9qfrkf'
    },{
        "title": "Big Other: Surveillance Capitalism and the Prospects of an Information Civilization.",
        "author":'S. Zuboff',
        "link":'<p>click to visit</p>',

        "link2":'https://journals.sagepub.com/doi/10.1057/jit.2015.5'
    },{
        "title": "The Rise of the ‘Just in Time Workforce’",
        "author":'V.D. Stefano',
        "link":'<p>click to visit</p>',

        "link2":'https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2682602'
    },

];
// set the dimensions and margins of the graph
var cldmargin = {top: 0, right: 0, bottom: 0, left: 0},
    cldwidth = document.getElementById('word-cloud-container').getBoundingClientRect().width - cldmargin.left - cldmargin.right,
    cldheight = document.getElementById('word-cloud-container').getBoundingClientRect().height - cldmargin.top - cldmargin.bottom;
let wordCldsvg,wordsvg,litsvg;
function draw(w,h,words) {
    var cldTooltipDiv = d3.select("#word-tool")
        .append("div")
        .style("opacity", 1)
        .attr("id", "tooltip-word")
        .attr("class", "tooltip");
    // .style("background-color", "white");

    var cldmouseover= function(d) {
        cldTooltipDiv
            .html(
                d.link
            );

        cldTooltipDiv
            .transition()
            .duration(50)
            .style('left', d3.event.pageX +20+ 'px')
            .style('top', d3.event.pageY + 'px')
            // .style("opacity", 1)
            .style ("display" , 'block');
        ;

        d3.select(this)
            // .transition()
            // .duration(150)
            .style("stroke", function(d){
                return d.borderColor
            })
        if(d3.select(this)[0][0]['__data__'].word=='laBOR'){
            addLiterature()
        }
    };
    var cldmouseclick=function(d){

        window.open(d.link2,'_blank')

    }
    var cldmousemove= function(d) {

        cldTooltipDiv
            .transition()
            .duration(50)
            .style('left', d3.event.pageX +20+ 'px')
            .style('top', d3.event.pageY + 'px')
            .style ("display" , 'block')
        ;
        // .style('background-color', "#ffffff");
        // .style("opacity", 1);

    };
    var cldmouseleave = function(d) {
        cldTooltipDiv
            .transition ()
            .duration (50)
            .style ("display" , 'none');

        d3.select (this)
            // .transition ()
            // .duration (150)
            .style("stroke", "none")
    };
// append the svg object to the body of the page
    wordCldsvg = d3.select ("#word-cloud-container").append ("svg")
        .attr ("width" , w + cldmargin.left + cldmargin.right)
        .attr ("height" , h + cldmargin.top + cldmargin.bottom);

    wordsvg=wordCldsvg.append ("g")
        .selectAll ("bigtext>text")
        .data (words)
        .enter ()
        .append ("text")
        .attr('stroke-width',function(d){
            return d.border
        })
        .attr('class',function(d){
            return 'bigtext '+d.word})

        .style ("font-size" , function(d) {
            return d.size/1000*h
        })

        .style ("fill" , function(d) {
            return d.tcolor
        })
        .style ("opacity" , 1)
        .attr ("text-anchor" , "right")
        .attr("class", "node")

        // .attr ("display" , "flex")
        .attr ("font-family" , function(d) {
            return d.font
        })
        .attr ("transform" , function(d) {
            return "translate(" + [d.x * w - 10 , d.y * h] + ")rotate(" + d.rot * 90 + ")";
        })
        .text (function(d) {
            return d.word;
        })
        .on('click',cldmouseclick)

        .on("mouseover", cldmouseover)
        .on("mousemove", cldmousemove)
        .on("mouseleave", cldmouseleave)
    ;

    function addLiterature(){
        litsvg=wordCldsvg.append ("g")
            .selectAll (".lit>text")
            .data (literature)
            .enter ()
            .append ("text")
            // .attr('stroke-width',function(d){
            //     return d.border
            // })

            .style ("font-size" , 15)
            .style ("fill" , '#000000')
            .style ("opacity" , 1)
            .style ("width" , 50)
            .style ("display" , "flex")
            .attr ("text-anchor" , "left")
            .attr("class", "node lit")
            // .attr ("display" , "flex")
            .attr ("font-family" , 'Arial')
            .attr ("transform" , function(d,i) {
                return "translate(" + [0.7 * w - 10 , 0.5 * h] + ")rotate(" + i/20 * 360 + ")";
            })
            .text (function(d) {
                return '---------'+d.author+' | '+d.title;
            })
            .on('click',cldmouseclick)
            .on("mouseover", cldmouseover)
            .on("mousemove", cldmousemove)
            .transition()
            .delay(8000)
            // .duration(250)
            .style('display','none');

    }
}

draw(cldwidth,cldheight,myWords)


// Redraw based on the new size whenever the browser window is resized.
//
// function updateWindow(){
//     x = document.getElementById('word-cloud-container').getBoundingClientRect().width - cldmargin.left - cldmargin.right,
//     y = document.getElementById('word-cloud-container').getBoundingClientRect().height - cldmargin.top - cldmargin.bottom;
//     // cldwidth = document.getElementById('word-cloud-container').getBoundingClientRect().width - cldmargin.left - cldmargin.right,
//     // cldheight = document.getElementById('word-cloud-container').getBoundingClientRect().height - cldmargin.top - cldmargin.bottom;
//     // draw(cldwidth,cldheight,myWords)
//     d3.select ("#word-cloud-container").attr("width", x).attr("height", y);
//     wordsvg.attr("width", x).attr("height", y);
//     wordsvg.selectAll('text')
//         .
//
// }

// window.addEventListener('resize', updateWindow);

// --------------------------------------------------------------------------------------------------------------------------------------------




